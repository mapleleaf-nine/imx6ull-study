# ioctl（对字符设备的I/O通道进行管理）

1. 头文件

    ```c
    #include <sys/ioctl.h>
    ```

2. 函数原型

    ```c
    int ioctl(int fd, unsigned long request, ...);
    ```

3. 函数说明

    - fd表示文件描述符

    - request表示与驱动程序交互的命令，用不同的命令控制驱动程序输出我们需要的数据

    - ...表示可变参数 arg， 根据 request 命令，设备驱动程序返回输出的数据。

    - 返回值： 打开成功返回0，失败将返回一个负值。

    - ioctl 的作用非常强大、灵活。不同的驱动程序内部会实现不同的 ioctl， APP 可以使用各种 ioctl 跟
驱动程序交互：可以传数据给驱动程序，也可以从驱动程序中读出数据。

4. 用法  
ioctl是设备驱动程序中设备控制接口函数，一个字符设备驱动通常会实现设备打开、关闭、读、写等功能，在一些需要细分的情境下，如果需要扩展新的功能，通常以增设 ioctl() 命令的方式实现。在文件IO操作中会使用。
